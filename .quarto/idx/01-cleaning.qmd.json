{"title":"Cleaning","markdown":{"yaml":{"title":"Cleaning"},"headingText":"Goals of this notebook","containsRefs":false,"markdown":"\n\n\nThe steps we'll take to prepare our data:\n\n- Download the data\n- Import it into our notebook\n- Clean up data types and columns\n- Export the data for next notebook\n\n# Setup \n\nLoading the libraries \n\n```{r}\n#| label: setup\n#| message: false\n\n\nlibrary(tidyverse)\nlibrary(janitor)\n```\n\n## Downloading the Data \n\nIn this section of the cleaning notebook, we're loading the VERSA program data. This data accounts for arrests made under Operation Lone Star starting in January 2023. \n\nHere is the summary of the differences between SPURS system and VERSA from the Depart of Public Safety Communications: \n\n\"Please note that arrests are now documented on two spreadsheets due to the implementation of a new record management system in 2023 by the Texas Highway Patrol (THP). Prior to January 2023, THP utilized the Enterprise Management (EM) System for traffic enforcement activity (written warnings, citations, and CMV inspections) and SPURS for documenting entrusted property and criminal case reports. Beginning in January of 2023, THP underwent a statewide rollout of the Versaterm Software Suite, completed in August 2023, which serves as THP’s only RMS system for regular traffic enforcement activity, entrusted property, as well as general and arrest offense report entry.\" \n\nMore information about Operation Lone Star is found in the index page of this website. \n\nThe data was obtained by a Public Records Request from KUT. \n\n```{r}\ndownload.file(\n  \"https://docs.google.com/spreadsheets/d/e/2PACX-1vT86k4riODyqAQeAQB0kB7NJlXDBQSJu19cUzNdJNZzUUXFLWuQHl5rmWZfXicGl2zqzztB6Hx8Gl-x/pub?output=csv\",\"data-raw/versa_analysis.csv\", mode = \"wb\"\n)\n```\n\n## Importing the Data \n\nHere we're importing the VERSA data spreadsheet that I already have downloaded to my \"data-raw\" folder. Then, we're adding our data to a code chunk. For simplicity it will be called \"versa_analysis,\" which we will then peak at in order to look at what our data looks like in order to clean. \n\n\n```{r}\nversa_analysis<- read_csv(\"data-raw/versa_analysis.csv\") |> clean_names()\n\nversa_analysis\n```\n\n```{r}\nversa_analysis |> glimpse()\n```\n\n\nNotes for VERSA cleaning: \n- \"Given three\" refers to two middle names, only very few individuals in the list have this listed \n- Years are given as \"apparent age\" changed this to the actual age number to line up to SPURS \"Person Age\" \n\n## Fixing the dates \n\nWe want to make sure that our dates are in month, date, year format for consistency in our analysis. \n\n```{r}\nversa_analysis_date <- versa_analysis |>\n mutate(\n   charge_date = mdy(arrest_date)\n  )\n\nversa_analysis_date |> glimpse()\n```\n\n```{r}\nversa_analysis_date\n```\n\nSummary Stats: \n\n```{r}\nversa_analysis_date |> summary()\n```\n\n\n## Fixing the age \n\nWe want our VERSA data to match up to SPURS when it comes the the \"Person Age\" data column. In order to do that we subtract this year's date minus the \"apparent_age\" column of the VERSA data. This gives us the age in the same numerical format.\n\n```{r}\nversa_analysis_age <- versa_analysis_date |>\n  mutate(\n    person_age = 2024- apparent_age\n    )\n\nversa_analysis_age |> glimpse()\n```\n\n## Fixing Names \nWe want to change the columns for the names of the offenders, so it matches up to the SPURS data set. Theb we want to change the officer column to \"officer\" and \n\n```{r}\nversa_analysis_names <- versa_analysis_age |>\n  mutate(\n    person_first_name = given_one, \n    person_second_name = given_two, \n    person_third_name = given_three, \n    person_last_name = individual_surname,\n    arrest_officer = arrest_officer1, \n    arrest_county = county_name, \n    code = class,\n    severity_code = severity_code_group, \n    person_race_abbr = race, \n    person_gender_abbr = gender_code\n    )\n\nversa_analysis_names |> glimpse()\n```\n\n## Create new column to match SPURS race column \n\nBecause the SPURS dataset uses the \"race\" column to identify both ethnicity and race, we created a new column that mirrors the SPURS way of documenting people's profiles. \n\n```{r}\nversa_analysis_new <- versa_analysis_names |>\n  mutate(\n    person_race_abbr = if_else(ethnicity== \"H\", ethnicity, person_race_abbr), \n    arrest_state = case_match(jurisdiction, \"TX\" ~ \"TEXAS\")\n  )\n\nversa_analysis_new |> glimpse()\n\n```\n\n\n## Filter out unnnessary columns \n\nAfter cleaning the names of the columns, I want to remove the columns with the old column names.I will use the select function to select the columns I don't want. \n\n```{r}\nversa_analysis_filter <- versa_analysis_new |>\n select(-c(apparent_age, given_one, given_two, given_three, individual_surname, arrest_officer1, jurisdiction, county_name, arrest_date, statute, class, severity_code_group, race, gender_code))\n\nversa_analysis_filter |> glimpse()\n  \n```\n\n \n- remove versa from severity code, figure out VT and remove? \n\n## Removing extra labels in \"severity_code\" \n\n```{r}\n\n```\n\n\n## Importing cleaned data \n\n```{r}\n \n```\n\n\n\n","srcMarkdownNoYaml":"\n\n## Goals of this notebook\n\nThe steps we'll take to prepare our data:\n\n- Download the data\n- Import it into our notebook\n- Clean up data types and columns\n- Export the data for next notebook\n\n# Setup \n\nLoading the libraries \n\n```{r}\n#| label: setup\n#| message: false\n\n\nlibrary(tidyverse)\nlibrary(janitor)\n```\n\n## Downloading the Data \n\nIn this section of the cleaning notebook, we're loading the VERSA program data. This data accounts for arrests made under Operation Lone Star starting in January 2023. \n\nHere is the summary of the differences between SPURS system and VERSA from the Depart of Public Safety Communications: \n\n\"Please note that arrests are now documented on two spreadsheets due to the implementation of a new record management system in 2023 by the Texas Highway Patrol (THP). Prior to January 2023, THP utilized the Enterprise Management (EM) System for traffic enforcement activity (written warnings, citations, and CMV inspections) and SPURS for documenting entrusted property and criminal case reports. Beginning in January of 2023, THP underwent a statewide rollout of the Versaterm Software Suite, completed in August 2023, which serves as THP’s only RMS system for regular traffic enforcement activity, entrusted property, as well as general and arrest offense report entry.\" \n\nMore information about Operation Lone Star is found in the index page of this website. \n\nThe data was obtained by a Public Records Request from KUT. \n\n```{r}\ndownload.file(\n  \"https://docs.google.com/spreadsheets/d/e/2PACX-1vT86k4riODyqAQeAQB0kB7NJlXDBQSJu19cUzNdJNZzUUXFLWuQHl5rmWZfXicGl2zqzztB6Hx8Gl-x/pub?output=csv\",\"data-raw/versa_analysis.csv\", mode = \"wb\"\n)\n```\n\n## Importing the Data \n\nHere we're importing the VERSA data spreadsheet that I already have downloaded to my \"data-raw\" folder. Then, we're adding our data to a code chunk. For simplicity it will be called \"versa_analysis,\" which we will then peak at in order to look at what our data looks like in order to clean. \n\n\n```{r}\nversa_analysis<- read_csv(\"data-raw/versa_analysis.csv\") |> clean_names()\n\nversa_analysis\n```\n\n```{r}\nversa_analysis |> glimpse()\n```\n\n\nNotes for VERSA cleaning: \n- \"Given three\" refers to two middle names, only very few individuals in the list have this listed \n- Years are given as \"apparent age\" changed this to the actual age number to line up to SPURS \"Person Age\" \n\n## Fixing the dates \n\nWe want to make sure that our dates are in month, date, year format for consistency in our analysis. \n\n```{r}\nversa_analysis_date <- versa_analysis |>\n mutate(\n   charge_date = mdy(arrest_date)\n  )\n\nversa_analysis_date |> glimpse()\n```\n\n```{r}\nversa_analysis_date\n```\n\nSummary Stats: \n\n```{r}\nversa_analysis_date |> summary()\n```\n\n\n## Fixing the age \n\nWe want our VERSA data to match up to SPURS when it comes the the \"Person Age\" data column. In order to do that we subtract this year's date minus the \"apparent_age\" column of the VERSA data. This gives us the age in the same numerical format.\n\n```{r}\nversa_analysis_age <- versa_analysis_date |>\n  mutate(\n    person_age = 2024- apparent_age\n    )\n\nversa_analysis_age |> glimpse()\n```\n\n## Fixing Names \nWe want to change the columns for the names of the offenders, so it matches up to the SPURS data set. Theb we want to change the officer column to \"officer\" and \n\n```{r}\nversa_analysis_names <- versa_analysis_age |>\n  mutate(\n    person_first_name = given_one, \n    person_second_name = given_two, \n    person_third_name = given_three, \n    person_last_name = individual_surname,\n    arrest_officer = arrest_officer1, \n    arrest_county = county_name, \n    code = class,\n    severity_code = severity_code_group, \n    person_race_abbr = race, \n    person_gender_abbr = gender_code\n    )\n\nversa_analysis_names |> glimpse()\n```\n\n## Create new column to match SPURS race column \n\nBecause the SPURS dataset uses the \"race\" column to identify both ethnicity and race, we created a new column that mirrors the SPURS way of documenting people's profiles. \n\n```{r}\nversa_analysis_new <- versa_analysis_names |>\n  mutate(\n    person_race_abbr = if_else(ethnicity== \"H\", ethnicity, person_race_abbr), \n    arrest_state = case_match(jurisdiction, \"TX\" ~ \"TEXAS\")\n  )\n\nversa_analysis_new |> glimpse()\n\n```\n\n\n## Filter out unnnessary columns \n\nAfter cleaning the names of the columns, I want to remove the columns with the old column names.I will use the select function to select the columns I don't want. \n\n```{r}\nversa_analysis_filter <- versa_analysis_new |>\n select(-c(apparent_age, given_one, given_two, given_three, individual_surname, arrest_officer1, jurisdiction, county_name, arrest_date, statute, class, severity_code_group, race, gender_code))\n\nversa_analysis_filter |> glimpse()\n  \n```\n\n \n- remove versa from severity code, figure out VT and remove? \n\n## Removing extra labels in \"severity_code\" \n\n```{r}\n\n```\n\n\n## Importing cleaned data \n\n```{r}\n \n```\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"01-cleaning.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.549","theme":"cosmo","title":"Cleaning"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}